"use strict";(self.webpackChunkdelivery_app=self.webpackChunkdelivery_app||[]).push([[912],{2912:function(e,r,s){s.r(r),s.d(r,{History:function(){return d},Main:function(){return u},Shop:function(){return x},ShoppingCart:function(){return b}});var a=s(6727),n=s(5705),t=s(9841),i=s(9434),c=s(6351),o=s(9870),l=s(5011),m=s(184),d=function(){var e=(0,i.I0)(),r=(0,i.v9)(c.Jr),s=a.Ry().shape({phone:a.Z_().required(),email:a.Z_().email().required()});return r?(0,m.jsx)(o.a,{}):(0,m.jsx)("section",{className:"history",children:(0,m.jsxs)("div",{className:"container",children:[(0,m.jsx)(n.J9,{validationSchema:s,onSubmit:function(r,s){var a=s.resetForm,n=r.email,t=r.phone;e((0,l.a)({email:n,phone:t})),a()},initialValues:{phone:"",email:""},children:function(e){var r=e.handleSubmit;return(0,m.jsxs)("form",{className:"history__form",onSubmit:r,children:[(0,m.jsxs)("div",{className:"history__form-wrapper",children:[(0,m.jsx)("div",{className:"history__item",children:(0,m.jsxs)("label",{className:"history__label",htmlFor:"address",children:["Phone:",(0,m.jsx)(n.gN,{type:"text",name:"phone",className:"history__input",placeholder:"Phone"}),(0,m.jsx)(n.Bc,{name:"address",component:"div",className:"error-message"})]})}),(0,m.jsx)("div",{className:"history__item",children:(0,m.jsxs)("label",{className:"history__label",htmlFor:"email",children:["Email:",(0,m.jsx)(n.gN,{type:"email",name:"email",className:"history__input",placeholder:"Email"}),(0,m.jsx)(n.Bc,{name:"email",component:"div",className:"error-message"})]})})]}),(0,m.jsx)("div",{className:"history__submit-wrapper",children:(0,m.jsx)("button",{type:"submit",className:"history__submit-btn",children:"Search order"})})]})}}),(0,m.jsx)(t.Rs,{})]})})},u=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(t.VM,{})})},h=s(9439),p=s(2791),_=s(5612),x=function(){var e=(0,i.I0)(),r=(0,i.v9)(c.rV),s=(0,i.v9)(c.Kv),a=(0,i.v9)(c.r7),n=(0,p.useState)(""),l=(0,h.Z)(n,2),d=l[0],u=l[1];return(0,p.useEffect)((function(){e((0,_.j)())}),[e]),(0,p.useEffect)((function(){d&&e((0,_.g)(d))}),[d,e]),s?(0,m.jsx)(o.a,{}):(0,m.jsx)("section",{className:"shop",children:(0,m.jsx)("div",{className:"container",children:(0,m.jsxs)("div",{className:"shop__wrapper",children:[(0,m.jsx)("ul",{className:"restraunt__list",children:r.data?r.data.delivery.map((function(e){var r=e._id,s=e.name;return(0,m.jsx)("li",{className:"restraunt__item",children:(0,m.jsx)("button",{type:"button",className:"restraunt__item--btn",onClick:function(){return u(r)},children:s})},r)})):null}),(0,m.jsx)("div",{className:"productlist--wrapper",children:(0,m.jsx)(t.cm,{productMenu:a.data})})]})})})},j=s(1413),f=s(5218),v=s(6106),b=function(){var e=(0,i.I0)(),r=a.Ry().shape({name:a.Z_().required(),address:a.Z_().required(),phone:a.Z_().required(),email:a.Z_().email().required(),totalPrice:a.Rx(),date:a.hT(),products:a.IX().of(a.Ry().shape({name:a.Z_(),price:a.Rx(),photo:a.Z_(),quantity:a.Rx()}))}),s=(0,i.v9)(c.fk),o=(0,i.v9)(c.by),d=s.reduce((function(e,r){return e+r.price}),0),u=function(){return f.Am.success("Your order is being processed, we will contact you soon")},h=function(){return f.Am.error("Something went wrong with the order")};return(0,m.jsxs)("section",{className:"shoppingCart",children:[(0,m.jsx)("div",{className:"container",children:(0,m.jsx)(n.J9,{validationSchema:r,onSubmit:function(a,n){var t=n.resetForm,i=a.name,c=a.address,m=a.phone,p=a.email,_=s.map((function(e){var r=(0,j.Z)({},e);return delete r._id,delete r.initialPrice,r}));0!==d?r.validate({name:i,address:c,phone:m,email:p,totalPrice:d,products:_,date:(new Date).toLocaleDateString()}).then((function(){e((0,l.L)({name:i,address:c,phone:m,email:p,totalPrice:d,products:_,date:(new Date).toLocaleDateString()})),o||e((0,v.QS)()),t(),u()})).catch((function(e){console.error(e),h()})):h()},initialValues:{name:"",address:"",phone:"",email:""},children:function(e){var r=e.handleSubmit;return(0,m.jsxs)("form",{className:"basket__form",onSubmit:r,children:[(0,m.jsxs)("div",{className:"basket__form-wrapper",children:[(0,m.jsx)(t.WF,{}),(0,m.jsx)(t.Fv,{})]}),(0,m.jsxs)("div",{className:"basket__totalprice",children:[(0,m.jsxs)("p",{children:["Total price: ",Number(d).toFixed(2),"$"]}),(0,m.jsx)("button",{type:"submit",className:"basket__submit-btn",children:"Pay for the order"})]})]})}})}),(0,m.jsx)(f.x7,{})]})}}}]);
//# sourceMappingURL=912.4077ea20.chunk.js.map